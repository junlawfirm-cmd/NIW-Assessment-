<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>NIW 성공 가능성 예측 시뮬레이터</title>
<style>
  :root{--bg:#f6f7fb;--card:#ffffff;--text:#111827;--muted:#6b7280;--border:#e5e7eb;--ok:#065f46;--warn:#92400e;--bad:#991b1b}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Apple SD Gothic Neo","Noto Sans KR",Helvetica,Arial,sans-serif;line-height:1.55}
  .wrap{max-width:1000px;margin:28px auto;padding:0 16px}
  h1{font-size:24px;margin:0 0 8px}
  p.lead{color:var(--muted);margin:0 0 18px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .section{border:1px solid var(--border);border-radius:16px;padding:16px;background:var(--card);box-shadow:0 2px 8px rgba(0,0,0,.05)}
  .section h2{font-size:16px;margin:0 0 10px}
  .field{display:flex;flex-direction:column;gap:6px;margin-bottom:10px}
  label{font-weight:700}
  input[type="number"], input[type="text"], select{border:1px solid #d1d5db;border-radius:10px;padding:10px;font-size:14px;width:100%;background:#fff}
  .muted{color:var(--muted);font-size:12px}
  .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
  .btn{display:inline-block;border:1px solid #111827;background:#111827;color:#fff;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
  .btn.reset{border-color:#d1d5db;background:#f9fafb;color:#111827}
  .result{margin-top:18px;border-radius:16px;padding:16px;border:1px solid var(--border);background:#f9fafb}
  .badge{display:inline-block;border:1px dashed #d1d5db;padding:8px 10px;border-radius:999px;font-size:12px;background:#fff;margin:4px 6px 0 0}
  .score{font-size:28px;font-weight:800;margin:0}
  .tag{font-weight:800}
  .ok{color:var(--ok);background:#ecfdf5;border-color:#a7f3d0}
  .warn{color:var(--warn);background:#fffbeb;border-color:#fde68a}
  .bad{color:var(--bad);background:#fef2f2;border-color:#fecaca}
  .tips{font-size:12px;color:var(--muted);margin-top:10px}
  ul{margin:8px 0 0 18px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
  <div class="wrap">
    <h1>NIW 성공 가능성 예측 시뮬레이터</h1>
    <p class="lead">간단한 지표를 입력하면 가중치에 따라 예측 점수를 산출합니다. <strong>법률 조언이 아닌 참고용</strong> 도구이며, <em>Dhanasar</em> 3요건(국익·포지셔닝·형평)을 개략적으로 반영합니다.</p>

    <div class="grid">
      <div class="section">
        <h2>연구/업적 지표</h2>
        <div class="field">
          <label>논문 수</label>
          <input id="pubs" type="number" min="0" step="1" placeholder="예: 12">
          <div class="muted">최대 20편까지 가점 반영</div>
        </div>
        <div class="field">
          <label>총 인용 수</label>
          <input id="cites" type="number" min="0" step="1" placeholder="예: 350">
          <div class="muted">최대 1,000회까지 가점 반영</div>
        </div>
        <div class="field">
          <label>h-index</label>
          <input id="hidx" type="number" min="0" step="1" placeholder="예: 12">
          <div class="muted">최대 25까지 가점 반영</div>
        </div>
        <div class="field">
          <label>특허(등록) 수</label>
          <input id="pat" type="number" min="0" step="1" placeholder="예: 2">
          <div class="muted">출원보다는 등록 위주로 입력</div>
        </div>
        <div class="field">
          <label>언론/미디어 보도 횟수</label>
          <input id="media" type="number" min="0" step="1" placeholder="예: 3">
        </div>
        <div class="field">
          <label>피어리뷰 초청 횟수</label>
          <input id="reviews" type="number" min="0" step="1" placeholder="예: 15">
        </div>
        <div class="field">
          <label>학회/컨퍼런스 초청 발표</label>
          <input id="talks" type="number" min="0" step="1" placeholder="예: 6">
        </div>
        <div class="field">
          <label>수상 실적</label>
          <input id="awards" type="number" min="0" step="1" placeholder="예: 2">
        </div>
      </div>

      <div class="section">
        <h2>영향력/포지셔닝</h2>
        <div class="field">
          <label>전문단체 회원 등급</label>
          <select id="member">
            <option value="none">없음/일반</option>
            <option value="member">정회원/프로페셔널</option>
            <option value="fellow">시니어/펠로우/리더십</option>
          </select>
        </div>
        <div class="field">
          <label>추천서 수준</label>
          <select id="letters">
            <option value="weak">기본/약함</option>
            <option value="standard">표준</option>
            <option value="strong">강력</option>
          </select>
        </div>
        <div class="field">
          <label>프로젝트/업적의 파급 범위</label>
          <select id="impact">
            <option value="local">지역</option>
            <option value="regional">광역/州</option>
            <option value="national">국가</option>
            <option value="global">국제</option>
          </select>
          <div class="muted">국가적 중요성 입증이 핵심</div>
        </div>
        <div class="field">
          <label>외부/정부 연구비(USD)</label>
          <input id="fund" type="number" min="0" step="1000" placeholder="예: 250000">
          <div class="muted">최대 100만불까지 가점</div>
        </div>
        <div class="field">
          <label>동종 직종 대비 연봉 퍼센타일</label>
          <select id="salary">
            <option value="<50">&lt; 50%</option>
            <option value="50-75">50–75%</option>
            <option value="75-90">75–90%</option>
            <option value="90-95">90–95%</option>
            <option value=">95">&gt; 95%</option>
          </select>
        </div>
        <div class="field">
          <label>핵심/중요 역할 수행</label>
          <select id="critical">
            <option value="no">아니오</option>
            <option value="yes">예</option>
          </select>
          <div class="muted">리드 역할, 핵심 인력, 대체 곤란성 등</div>
        </div>
        <div class="field">
          <label>창업/일자리 창출 활동</label>
          <select id="entre">
            <option value="no">아니오</option>
            <option value="yes">예</option>
          </select>
        </div>
      </div>
    </div>

    <div class="btns">
      <button class="btn" onclick="calc()">예측 점수 계산</button>
      <button class="btn reset" onclick="resetAll()">초기화</button>
    </div>

    <div id="out" class="result" style="display:none"></div>

    <div class="tips">
      <strong>고지:</strong> 본 도구는 내부 가중치 모델로 산출하는 <em>비공식</em> 참고치이며, USCIS의 판단을 대체하지 않습니다. 케이스는 <em>Matter of Dhanasar</em> 3요건에 따라 전반적 근거로 심사됩니다.
    </div>
  </div>

<script>
function val(id){ return document.getElementById(id).value; }
function num(id){ return parseFloat(document.getElementById(id).value||0); }

function calc(){
  // Inputs
  const pubs=num('pubs'), cites=num('cites'), hidx=num('hidx'), pat=num('pat');
  const media=num('media'), reviews=num('reviews'), talks=num('talks'), awards=num('awards');
  const member=val('member'), letters=val('letters'), impact=val('impact');
  const fund=num('fund'), salary=val('salary'), critical=val('critical'), entre=val('entre');

  // Weights (max raw total = 79)
  let raw = 0;
  raw += Math.min(pubs,20)/20 * 6;           // up to 6
  raw += Math.min(cites,1000)/1000 * 10;     // up to 10
  raw += Math.min(hidx,25)/25 * 6;           // up to 6
  raw += Math.min(pat,10)/10 * 6;            // up to 6
  raw += Math.min(media,10)/10 * 3;          // up to 3
  raw += Math.min(reviews,30)/30 * 5;        // up to 5
  raw += Math.min(talks,20)/20 * 3;          // up to 3
  raw += Math.min(awards,10)/10 * 4;         // up to 4

  // membership
  raw += (member==='fellow'?3:(member==='member'?1:0)); // up to 3
  // letters
  raw += (letters==='strong'?4:(letters==='standard'?2:0)); // up to 4
  // impact
  raw += (impact==='global'?6:impact==='national'?4:impact==='regional'?2:0); // up to 6
  // funding
  raw += Math.min(fund/1000000,1) * 5;       // up to 5
  // salary percentile
  raw += (salary==='>95'?8:(salary==='90-95'?6:(salary==='75-90'?4:(salary==='50-75'?2:0)))); // up to 8
  // critical role
  raw += (critical==='yes'?6:0);             // up to 6
  // entrepreneurship
  raw += (entre==='yes'?4:0);                // up to 4

  const maxRaw = 79;
  const score = Math.round((raw / maxRaw) * 100);

  // Verdict
  let label = '', cls='warn', advice=[];
  if(score >= 70){ label='Strong / 경쟁력 높음'; cls='ok'; }
  else if(score >= 50){ label='Borderline / 보완 시 가능'; cls='warn'; }
  else { label='Needs Work / 보완 필요'; cls='bad'; }

  // Targeted suggestions based on weaker areas
  if(cites < 200) advice.push('독립 인용 확보: 공동저자 제외 인용 중심으로 사례 수집');
  if(reviews < 10) advice.push('저널/컨퍼런스 피어리뷰 초청 기록 확대 (초청 이메일, 리뷰 완료 증빙 보관)');
  if(impact==='local' || impact==='regional') advice.push('국가적 중요성: 정부/산업 보고서, 표준화 기여, 정책 반영 증거로 업적의 파급 범위 확대 입증');
  if(letters!=='strong') advice.push('추천서 강화: 분야 리더/독립 추천인 비중 확대, 구체적 사례 포함');
  if(pat < 1 && pubs < 6) advice.push('핵심 산출물 보완: 특허 등록 또는 영향력 높은 출판물 확보');
  if(fund < 50000) advice.push('외부 연구비/정부 과제 참여·수주 실적 확보');
  if(salary==='<50' || salary==='50-75') advice.push('임금 자료 외에 업계 대체곤란성·핵심역할 증거로 보완');
  if(critical==='no') advice.push('핵심 역할 증거: 팀 내 리드·주요 기능 책임·성과지표(KPI) 명시');

  const out = document.getElementById('out');
  out.style.display='block';
  out.className='result ' + cls;
  out.innerHTML = `
    <p class="score">${score} / 100</p>
    <p class="tag"><strong>${label}</strong></p>
    <div class="muted">※ 내부 가중치 모델(비공식 참고치) — Dhanasar 3요건: 국익(Impact), 포지셔닝(업적·추천서·핵심역할), 형평(Balancing)</div>
    <div style="margin-top:10px">
      <span class="badge">논문 ${pubs||0}</span>
      <span class="badge">인용 ${cites||0}</span>
      <span class="badge">h-index ${hidx||0}</span>
      <span class="badge">특허 ${pat||0}</span>
      <span class="badge">미디어 ${media||0}</span>
      <span class="badge">리뷰 ${reviews||0}</span>
      <span class="badge">발표 ${talks||0}</span>
      <span class="badge">수상 ${awards||0}</span>
      <span class="badge">회원 ${member}</span>
      <span class="badge">추천서 ${letters}</span>
      <span class="badge">파급 ${impact}</span>
      <span class="badge">연구비 $${(fund||0).toLocaleString()}</span>
      <span class="badge">연봉 퍼센타일 ${salary}</span>
      <span class="badge">핵심역할 ${critical}</span>
      <span class="badge">창업 ${entre}</span>
    </div>
    ${advice.length?('<h3 style="margin:14px 0 6px;font-size:16px">권장 다음 단계</h3><ul>'+advice.map(a=>'<li>'+a+'</li>').join('')+'</ul>'):('<div class="muted" style="margin-top:8px">특별한 보완 권고 없음 — 현재 자료 중심으로 패키지 구성 권장</div>')}
  `;
}

function resetAll(){
  ['pubs','cites','hidx','pat','media','reviews','talks','awards','fund'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('member').value='none';
  document.getElementById('letters').value='standard';
  document.getElementById('impact').value='regional';
  document.getElementById('salary').value='50-75';
  document.getElementById('critical').value='no';
  document.getElementById('entre').value='no';
  const out=document.getElementById('out'); out.style.display='none'; out.innerHTML='';
}
</script>
</body>
</html>
